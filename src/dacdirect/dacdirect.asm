* 6809
* DAC Direct
*
	NAM DACDIR
	OPT l
	PAGE
		
VDU	EQU	$E030
SNDL	EQU	$E080
SNDR	EQU	$E090

	ORG	$0F00
CURX	RMB	1
CURY	RMB	1
		
	ORG	$1000
	LDA	#0
	STA	CURX
	STA	CURY
	BSR	MOVECUR
	LDX	#MSG
	BSR	PRINTS

* We set the sound chips to DAC direct mode
	LDA	#0
	LDX	#SNDL
	LDY	#SNDR
	STA	0,X
	STA	0,Y

* We play a saw wave
MAIN0	INCA
	STA	6,X
	STA	6,Y
	
	LDB	#$20
MAIN1	DECB
	BNE	MAIN1

	BRA	MAIN0

LOOP	JMP	LOOP

MOVECUR	LDY	#VDU
	LDA	CURX
	STA	2,Y
	LDA	CURY
	STA	3,Y
	RTS
	
PRINTS	LDY	#VDU
	LDA	,X+
	CMPA	#0
	BEQ	PRINTS1
	STA	,Y
	LDA	CURX
	INCA
	STA	2,Y
	STA	CURX
	JMP PRINTS
PRINTS1	RTS

MSG	FCC	'DAC Direct!'
	FCB	0

	END
